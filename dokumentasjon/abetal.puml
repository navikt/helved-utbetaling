@startuml
!theme black-knight
queue "dp-utbetalinger-session-repartition" <<topic>> as dp_utbetalinger_session_repartition
queue "utbetalinger-groupby-sakkey-repartition" <<topic>> as utbetalinger_groupby_sakkey_repartition
queue "helved.utbetalinger.v1" <<topic>> as helved_utbetalinger_v1
queue "dp-periode-leftjoin-utbetalinger-repartition" <<topic>> as dp_periode_leftjoin_utbetalinger_repartition
queue "helved.saker.v1" <<topic>> as helved_saker_v1
queue "dptuple-leftjoin-saker-repartition" <<topic>> as dptuple_leftjoin_saker_repartition
queue "from-teamdagpenger.utbetaling.v1-repartition" <<topic>> as from_teamdagpenger_utbetaling_v1_repartition
queue "teamdagpenger.utbetaling.v1" <<topic>> as teamdagpenger_utbetaling_v1
queue "helved.simuleringer.v1" <<topic>> as helved_simuleringer_v1
queue "helved.oppdrag.v1" <<topic>> as helved_oppdrag_v1
queue "helved.status.v1" <<topic>> as helved_status_v1
package "Sub-topology: 0" {
	database "helved.utbetalinger.v1-state-store" <<State Store>> as helved_utbetalinger_v1_state_store
	agent "consume-helved.utbetalinger.v1" <<Source>> as consume_helved_utbetalinger_v1
	agent "KSTREAM-PROCESSVALUES-0000000001" <<Processor>> as KSTREAM_PROCESSVALUES_0000000001
	agent "KSTREAM-PROCESSVALUES-0000000002" <<Processor>> as KSTREAM_PROCESSVALUES_0000000002
	agent "dp-periode-leftjoin-utbetalinger-repartition-source" <<Source>> as dp_periode_leftjoin_utbetalinger_repartition_source
	agent "dp-periode-leftjoin-utbetalinger" <<Processor>> as dp_periode_leftjoin_utbetalinger
	agent "ktable-helved.utbetalinger.v1" <<Processor>> as ktable_helved_utbetalinger_v1
	agent "KSTREAM-FILTER-0000000032" <<Processor>> as KSTREAM_FILTER_0000000032
	agent "KTABLE-TOSTREAM-0000000004" <<Processor>> as KTABLE_TOSTREAM_0000000004
	agent "KSTREAM-FILTER-0000000005" <<Processor>> as KSTREAM_FILTER_0000000005
	agent "KSTREAM-KEY-SELECT-0000000033" <<Processor>> as KSTREAM_KEY_SELECT_0000000033
	agent "KSTREAM-KEY-SELECT-0000000006" <<Processor>> as KSTREAM_KEY_SELECT_0000000006
	agent "KSTREAM-MAPVALUES-0000000034" <<Processor>> as KSTREAM_MAPVALUES_0000000034
	agent "dp-utbetalinger-session-repartition-filter" <<Processor>> as dp_utbetalinger_session_repartition_filter
	agent "utbetalinger-groupby-sakkey-repartition-filter" <<Processor>> as utbetalinger_groupby_sakkey_repartition_filter
	agent "dp-utbetalinger-session-repartition-sink" <<Sink>> as dp_utbetalinger_session_repartition_sink
	agent "utbetalinger-groupby-sakkey-repartition-sink" <<Sink>> as utbetalinger_groupby_sakkey_repartition_sink
	helved_utbetalinger_v1 --> consume_helved_utbetalinger_v1
	dp_periode_leftjoin_utbetalinger_repartition --> dp_periode_leftjoin_utbetalinger_repartition_source
	helved_utbetalinger_v1_state_store -- dp_periode_leftjoin_utbetalinger
	helved_utbetalinger_v1_state_store -- ktable_helved_utbetalinger_v1
	dp_utbetalinger_session_repartition <-- dp_utbetalinger_session_repartition_sink
	utbetalinger_groupby_sakkey_repartition <-- utbetalinger_groupby_sakkey_repartition_sink
	consume_helved_utbetalinger_v1 --> KSTREAM_PROCESSVALUES_0000000001
	KSTREAM_PROCESSVALUES_0000000001 --> KSTREAM_PROCESSVALUES_0000000002
	KSTREAM_PROCESSVALUES_0000000002 --> ktable_helved_utbetalinger_v1
	dp_periode_leftjoin_utbetalinger_repartition_source --> dp_periode_leftjoin_utbetalinger
	dp_periode_leftjoin_utbetalinger --> KSTREAM_FILTER_0000000032
	ktable_helved_utbetalinger_v1 --> KTABLE_TOSTREAM_0000000004
	KSTREAM_FILTER_0000000032 --> KSTREAM_KEY_SELECT_0000000033
	KTABLE_TOSTREAM_0000000004 --> KSTREAM_FILTER_0000000005
	KSTREAM_FILTER_0000000005 --> KSTREAM_KEY_SELECT_0000000006
	KSTREAM_KEY_SELECT_0000000033 --> KSTREAM_MAPVALUES_0000000034
	KSTREAM_KEY_SELECT_0000000006 --> utbetalinger_groupby_sakkey_repartition_filter
	KSTREAM_MAPVALUES_0000000034 --> dp_utbetalinger_session_repartition_filter
	dp_utbetalinger_session_repartition_filter --> dp_utbetalinger_session_repartition_sink
	utbetalinger_groupby_sakkey_repartition_filter --> utbetalinger_groupby_sakkey_repartition_sink
}
package "Sub-topology: 1" {
	database "helved.saker.v1-state-store-materialized" <<State Store>> as helved_saker_v1_state_store_materialized
	agent "utbetalinger-groupby-sakkey-repartition-source" <<Source>> as utbetalinger_groupby_sakkey_repartition_source
	agent "dptuple-leftjoin-saker-repartition-source" <<Source>> as dptuple_leftjoin_saker_repartition_source
	agent "helved.saker.v1-state-store-aggregate" <<Processor>> as helved_saker_v1_state_store_aggregate
	agent "KTABLE-TOSTREAM-0000000011" <<Processor>> as KTABLE_TOSTREAM_0000000011
	agent "dptuple-leftjoin-saker" <<Processor>> as dptuple_leftjoin_saker
	agent "KSTREAM-FILTER-0000000012" <<Processor>> as KSTREAM_FILTER_0000000012
	agent "KSTREAM-FLATMAP-0000000027" <<Processor>> as KSTREAM_FLATMAP_0000000027
	agent "KSTREAM-PROCESSVALUES-0000000013" <<Processor>> as KSTREAM_PROCESSVALUES_0000000013
	agent "dp-periode-leftjoin-utbetalinger-repartition-filter" <<Processor>> as dp_periode_leftjoin_utbetalinger_repartition_filter
	agent "KSTREAM-SINK-0000000014" <<Sink>> as KSTREAM_SINK_0000000014
	agent "dp-periode-leftjoin-utbetalinger-repartition-sink" <<Sink>> as dp_periode_leftjoin_utbetalinger_repartition_sink
	utbetalinger_groupby_sakkey_repartition --> utbetalinger_groupby_sakkey_repartition_source
	dptuple_leftjoin_saker_repartition --> dptuple_leftjoin_saker_repartition_source
	helved_saker_v1_state_store_materialized -- helved_saker_v1_state_store_aggregate
	helved_saker_v1_state_store_materialized -- dptuple_leftjoin_saker
	helved_saker_v1 <-- KSTREAM_SINK_0000000014
	dp_periode_leftjoin_utbetalinger_repartition <-- dp_periode_leftjoin_utbetalinger_repartition_sink
	utbetalinger_groupby_sakkey_repartition_source --> helved_saker_v1_state_store_aggregate
	dptuple_leftjoin_saker_repartition_source --> dptuple_leftjoin_saker
	helved_saker_v1_state_store_aggregate --> KTABLE_TOSTREAM_0000000011
	KTABLE_TOSTREAM_0000000011 --> KSTREAM_FILTER_0000000012
	dptuple_leftjoin_saker --> KSTREAM_FLATMAP_0000000027
	KSTREAM_FILTER_0000000012 --> KSTREAM_PROCESSVALUES_0000000013
	KSTREAM_FLATMAP_0000000027 --> dp_periode_leftjoin_utbetalinger_repartition_filter
	KSTREAM_PROCESSVALUES_0000000013 --> KSTREAM_SINK_0000000014
	dp_periode_leftjoin_utbetalinger_repartition_filter --> dp_periode_leftjoin_utbetalinger_repartition_sink
}
package "Sub-topology: 2" {
	agent "consume-teamdagpenger.utbetaling.v1" <<Source>> as consume_teamdagpenger_utbetaling_v1
	agent "KSTREAM-PROCESSVALUES-0000000016" <<Processor>> as KSTREAM_PROCESSVALUES_0000000016
	agent "KSTREAM-FILTER-0000000017" <<Processor>> as KSTREAM_FILTER_0000000017
	agent "from-teamdagpenger.utbetaling.v1-repartition-filter" <<Processor>> as from_teamdagpenger_utbetaling_v1_repartition_filter
	agent "from-teamdagpenger.utbetaling.v1-repartition-sink" <<Sink>> as from_teamdagpenger_utbetaling_v1_repartition_sink
	teamdagpenger_utbetaling_v1 --> consume_teamdagpenger_utbetaling_v1
	from_teamdagpenger_utbetaling_v1_repartition <-- from_teamdagpenger_utbetaling_v1_repartition_sink
	consume_teamdagpenger_utbetaling_v1 --> KSTREAM_PROCESSVALUES_0000000016
	KSTREAM_PROCESSVALUES_0000000016 --> KSTREAM_FILTER_0000000017
	KSTREAM_FILTER_0000000017 --> from_teamdagpenger_utbetaling_v1_repartition_filter
	from_teamdagpenger_utbetaling_v1_repartition_filter --> from_teamdagpenger_utbetaling_v1_repartition_sink
}
package "Sub-topology: 3" {
	agent "from-teamdagpenger.utbetaling.v1-repartition-source" <<Source>> as from_teamdagpenger_utbetaling_v1_repartition_source
	agent "KSTREAM-MAPVALUES-0000000021" <<Processor>> as KSTREAM_MAPVALUES_0000000021
	agent "KSTREAM-KEY-SELECT-0000000022" <<Processor>> as KSTREAM_KEY_SELECT_0000000022
	agent "dptuple-leftjoin-saker-repartition-filter" <<Processor>> as dptuple_leftjoin_saker_repartition_filter
	agent "dptuple-leftjoin-saker-repartition-sink" <<Sink>> as dptuple_leftjoin_saker_repartition_sink
	from_teamdagpenger_utbetaling_v1_repartition --> from_teamdagpenger_utbetaling_v1_repartition_source
	dptuple_leftjoin_saker_repartition <-- dptuple_leftjoin_saker_repartition_sink
	from_teamdagpenger_utbetaling_v1_repartition_source --> KSTREAM_MAPVALUES_0000000021
	KSTREAM_MAPVALUES_0000000021 --> KSTREAM_KEY_SELECT_0000000022
	KSTREAM_KEY_SELECT_0000000022 --> dptuple_leftjoin_saker_repartition_filter
	dptuple_leftjoin_saker_repartition_filter --> dptuple_leftjoin_saker_repartition_sink
}
package "Sub-topology: 4" {
	database "dp-aggregate-store-materialized" <<State Store>> as dp_aggregate_store_materialized
	database "dp-aggregate-store" <<State Store>> as dp_aggregate_store
	agent "dp-utbetalinger-session-repartition-source" <<Source>> as dp_utbetalinger_session_repartition_source
	agent "dp-aggregate-store-reduce" <<Processor>> as dp_aggregate_store_reduce
	agent "KTABLE-TOSTREAM-0000000039" <<Processor>> as KTABLE_TOSTREAM_0000000039
	agent "dp-aggregate-store-suppress" <<Processor>> as dp_aggregate_store_suppress
	agent "KSTREAM-KEY-SELECT-0000000040" <<Processor>> as KSTREAM_KEY_SELECT_0000000040
	agent "KSTREAM-MAPVALUES-0000000041" <<Processor>> as KSTREAM_MAPVALUES_0000000041
	agent "KSTREAM-BRANCH-0000000042" <<Processor>> as KSTREAM_BRANCH_0000000042
	agent "KSTREAM-BRANCH-00000000421" <<Processor>> as KSTREAM_BRANCH_00000000421
	agent "KSTREAM-MAPVALUES-0000000044" <<Processor>> as KSTREAM_MAPVALUES_0000000044
	agent "KSTREAM-FLATMAPVALUES-0000000051" <<Processor>> as KSTREAM_FLATMAPVALUES_0000000051
	agent "KSTREAM-BRANCH-00000000420" <<Processor>> as KSTREAM_BRANCH_00000000420
	agent "KSTREAM-FLATMAP-0000000045" <<Processor>> as KSTREAM_FLATMAP_0000000045
	agent "KSTREAM-FLATMAPVALUES-0000000048" <<Processor>> as KSTREAM_FLATMAPVALUES_0000000048
	agent "KSTREAM-MAPVALUES-0000000054" <<Processor>> as KSTREAM_MAPVALUES_0000000054
	agent "KSTREAM-MAPVALUES-0000000058" <<Processor>> as KSTREAM_MAPVALUES_0000000058
	agent "KSTREAM-PROCESSVALUES-0000000046" <<Processor>> as KSTREAM_PROCESSVALUES_0000000046
	agent "KSTREAM-PROCESSVALUES-0000000049" <<Processor>> as KSTREAM_PROCESSVALUES_0000000049
	agent "KSTREAM-PROCESSVALUES-0000000052" <<Processor>> as KSTREAM_PROCESSVALUES_0000000052
	agent "KSTREAM-PROCESSVALUES-0000000055" <<Processor>> as KSTREAM_PROCESSVALUES_0000000055
	agent "KSTREAM-PROCESSVALUES-0000000059" <<Processor>> as KSTREAM_PROCESSVALUES_0000000059
	agent "KSTREAM-SINK-0000000047" <<Sink>> as KSTREAM_SINK_0000000047
	agent "KSTREAM-SINK-0000000050" <<Sink>> as KSTREAM_SINK_0000000050
	agent "KSTREAM-SINK-0000000053" <<Sink>> as KSTREAM_SINK_0000000053
	agent "KSTREAM-SINK-0000000056" <<Sink>> as KSTREAM_SINK_0000000056
	agent "KSTREAM-SINK-0000000060" <<Sink>> as KSTREAM_SINK_0000000060
	dp_utbetalinger_session_repartition --> dp_utbetalinger_session_repartition_source
	dp_aggregate_store_materialized -- dp_aggregate_store_reduce
	dp_aggregate_store -- dp_aggregate_store_suppress
	helved_utbetalinger_v1 <-- KSTREAM_SINK_0000000047
	helved_simuleringer_v1 <-- KSTREAM_SINK_0000000050
	helved_oppdrag_v1 <-- KSTREAM_SINK_0000000053
	helved_status_v1 <-- KSTREAM_SINK_0000000056
	helved_status_v1 <-- KSTREAM_SINK_0000000060
	dp_utbetalinger_session_repartition_source --> dp_aggregate_store_reduce
	dp_aggregate_store_reduce --> KTABLE_TOSTREAM_0000000039
	KTABLE_TOSTREAM_0000000039 --> dp_aggregate_store_suppress
	dp_aggregate_store_suppress --> KSTREAM_KEY_SELECT_0000000040
	KSTREAM_KEY_SELECT_0000000040 --> KSTREAM_MAPVALUES_0000000041
	KSTREAM_MAPVALUES_0000000041 --> KSTREAM_BRANCH_0000000042
	KSTREAM_BRANCH_0000000042 --> KSTREAM_BRANCH_00000000420
	KSTREAM_BRANCH_0000000042 --> KSTREAM_BRANCH_00000000421
	KSTREAM_BRANCH_00000000421 --> KSTREAM_MAPVALUES_0000000044
	KSTREAM_MAPVALUES_0000000044 --> KSTREAM_FLATMAPVALUES_0000000051
	KSTREAM_MAPVALUES_0000000044 --> KSTREAM_FLATMAP_0000000045
	KSTREAM_MAPVALUES_0000000044 --> KSTREAM_FLATMAPVALUES_0000000048
	KSTREAM_FLATMAPVALUES_0000000051 --> KSTREAM_MAPVALUES_0000000054
	KSTREAM_FLATMAPVALUES_0000000051 --> KSTREAM_PROCESSVALUES_0000000052
	KSTREAM_BRANCH_00000000420 --> KSTREAM_MAPVALUES_0000000058
	KSTREAM_FLATMAP_0000000045 --> KSTREAM_PROCESSVALUES_0000000046
	KSTREAM_FLATMAPVALUES_0000000048 --> KSTREAM_PROCESSVALUES_0000000049
	KSTREAM_MAPVALUES_0000000054 --> KSTREAM_PROCESSVALUES_0000000055
	KSTREAM_MAPVALUES_0000000058 --> KSTREAM_PROCESSVALUES_0000000059
	KSTREAM_PROCESSVALUES_0000000046 --> KSTREAM_SINK_0000000047
	KSTREAM_PROCESSVALUES_0000000049 --> KSTREAM_SINK_0000000050
	KSTREAM_PROCESSVALUES_0000000052 --> KSTREAM_SINK_0000000053
	KSTREAM_PROCESSVALUES_0000000055 --> KSTREAM_SINK_0000000056
	KSTREAM_PROCESSVALUES_0000000059 --> KSTREAM_SINK_0000000060
}
package "Sub-topology: 5" {
	database "helved.saker.v1-state-store" <<State Store>> as helved_saker_v1_state_store
	agent "consume-helved.saker.v1" <<Source>> as consume_helved_saker_v1
	agent "KSTREAM-PROCESSVALUES-0000000062" <<Processor>> as KSTREAM_PROCESSVALUES_0000000062
	agent "KSTREAM-PROCESSVALUES-0000000063" <<Processor>> as KSTREAM_PROCESSVALUES_0000000063
	agent "ktable-helved.saker.v1" <<Processor>> as ktable_helved_saker_v1
	helved_saker_v1 --> consume_helved_saker_v1
	helved_saker_v1_state_store -- ktable_helved_saker_v1
	consume_helved_saker_v1 --> KSTREAM_PROCESSVALUES_0000000062
	KSTREAM_PROCESSVALUES_0000000062 --> KSTREAM_PROCESSVALUES_0000000063
	KSTREAM_PROCESSVALUES_0000000063 --> ktable_helved_saker_v1
}
@enduml